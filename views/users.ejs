<%- include('layouts/header.ejs') %>
<head>
  <link rel="stylesheet" href="/css/navbar.css">
  <link rel="stylesheet" href="/css/users.css">
  <link rel="stylesheet" href="/css/modal.css">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/css/select2.min.css" rel="stylesheet" />
</head>

<div class="searchcontainer col-md-6">
  <!-- Search / name-city -->
  <div class="top-search-bar"> 
    <form action="/users" method="get" id="searchForm">  
      <div class="inlinecontainer">
        <image src="../images/Lupa.png" style="width: 23px; height: 23px;">
        <!-- <label for="name">Name:</label> -->
        <input class="inpt" type="text" id="name" name="name" placeholder="<%= __('Find by Username') %>">
        <button type="submit" class="btn"><%= __('Search') %></button>
        <button type="button" class="btn" id="openModalBtn"><%= __('Advanced Search') %></button>
      </div>
    </form>
  </div>
</div>

<!-- MODAL FOR DETAILED SEARCH -->
<div id="myModal" class="modal"> 
  <div class="modal-content"> 
    <span class="close">&times;</span> 
    <h2><%= __('Detailed Search') %></h2> 
    <form id="detailedSearch" action="/users" method="get"> 
      <label for="Name"><%= __('Name') %>:</label> 
      <input class="" type="text" id="name" name="name"> <br>
      <label for="city"><%= __('City') %>:</label>
      <select class="select-class" style="width: 175px" name="city">
        <% allCities.forEach(city => { %>
          <option value="<%= city._id %>" > 
            <%= city.name %>
          </option>
        <% }) %>
      </select>
      <label for="positions"><%= __('Roles') %>:</label>
      <select class="select-class" style="width: 175px" name="positions" multiple="multiple">
        <% allPositions.forEach(position => { %>
          <option value="<%= position._id %>"> 
            <%= position.name %>
          </option>
        <% }) %>
      </select> <br>
      <label for="instruments"><%= __('Instruments') %>:</label>
      <select class="select-class" style="width: 175px" name="instruments" multiple="multiple">
        <% allInstruments.forEach(instrument => { %>
          <option value="<%= instrument._id %>">
            <%= instrument.name %>
          </option>
        <% }) %>
      </select> <br>
      <label for="genres"><%= __('Genres') %>:</label>
      <select class="select-class" style="width: 175px" name="genres" multiple="multiple">
        <% allGenres.forEach(genre => { %>
          <option value="<%= genre._id %>">
            <%= genre.name %>
          </option>
        <% }) %>
      </select> <br>
      <label for="languages"><%= __('Languages') %>:</label>
      <select class="select-class" style="width: 175px" name="languages" multiple="multiple">
        <% allLanguages.forEach(language => { %>
          <option value="<%= language._id %>"> 
            <%= language.name %>
          </option>
        <% }) %>
      </select>
      <button class="botn" type="submit"><%= __('Find') %></button> 
    </form> 
  </div>
</div>

<div class="user-container"> 
  <% if (users.length > 0) { %>  
    <% for(let i = 0; i < users.length; i++){ %> 
      <a href="/profile/<%=users[i]['_id'] %>"> 
        <div class="user-card"> 
          <img src="data:jpeg;base64,<%= users[i]['image'] %>" alt="<%= __('User image') %>" class="user-image"/> 
          <p class="user-name"><%=users[i]['name']%></p> 
        </div> 
      </a>   
    <% } } %> 
</div>

<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/select2/4.0.13/js/select2.min.js"></script>
<script src="/js/users.js"></script>

<%- include('layouts/footer.ejs') %>
